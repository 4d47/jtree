<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <script type="text/javascript" src="/products/jtree.browser.js"></script>
    <script type="text/javascript" src="/products/core.test.browser.js"></script>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
  </head>
  <body>
    <style>
      body {
        white-space: pre;
      }
    </style>
    <script type="text/javascript">
      const runTestMethod = new URLSearchParams(new URL(location.href).search).get("runTestMethod")
      let testsToRun = testTree
      if (runTestMethod) {
        testsToRun = {}
        testsToRun[runTestMethod] = testTree[runTestMethod]
      }
      const bodyTag = document.getElementsByTagName("body")[0]
      new jtree.Utils.TestRacer(message => {
        const result = document.createElement("div")
        result.innerHTML = message.replace(/ method (\w+)/, " method <a href='?runTestMethod=$1'>$1</a>")
        bodyTag.prepend(result)
      }).runAndDone("core.test.browser.js", testsToRun)
    </script>
  </body>
</html>
